<div class="container mx-auto p-4">
  <div class="bg-white rounded-lg shadow p-4">
    <h1 class="text-3xl font-semibold"><%= @user.username %></h1>
    <div class="mt-4">
      <% if @user.profile_picture.present? %>
        <img src="<%= @user.profile_picture %>" alt="<%= @user.username %>'s profile picture" class="rounded-full w-32 h-32">
      <% else %>
        <div class="rounded-full bg-gray-200 w-32 h-32 flex items-center justify-center">
          <span class="text-gray-700 text-lg">No Image</span>
        </div>
      <% end %>
    </div>
    <div class="mt-4">
      <p class="text-gray-700"><%= @user.bio %></p>
    </div>
  </div>

  <div id="profile-info" class="tab-content mt-4">
    <h2 class="text-2xl font-semibold">Profile Information</h2>
    <p class="text-gray-700"><%= @user.bio %></p>
  </div>

  <div id="posts" class="tab-content mt-4">
    <h2 class="text-2xl font-semibold">Posts</h2>
    <%= link_to 'New Post', new_post_path, class: 'btn btn-primary mb-4' %>
    <% if @posts.any? %>
      <% @posts.each do |post| %>
        <%= render 'posts/post_card', post: post %>
      <% end %>
    <% else %>
      <p class="text-gray-700">No posts available.</p>
    <% end %>
  </div>

  <div id="subscriptions" class="tab-content mt-4 hidden">
    <h2 class="text-2xl font-semibold">Subscriptions</h2>
    <% if @subscriptions.any? %>
      <% @subscriptions.each do |subscription| %>
        <div class="bg-white rounded-lg shadow p-4 mt-4">
          <h3 class="text-xl font-semibold"><%= subscription.trader.username %></h3>
          <p class="text-gray-700"><%= subscription.trader.bio %></p>
        </div>
      <% end %>
    <% else %>
      <p class="text-gray-700">You aren't subscribed to any creators yet.</p>
    <% end %>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    const tabs = document.querySelectorAll('.tab-content');
    const links = document.querySelectorAll('ul li a');

    links.forEach(link => {
      link.addEventListener('click', function(event) {
        event.preventDefault();
        tabs.forEach(tab => tab.classList.add('hidden'));
        const target = document.querySelector(link.getAttribute('href'));
        target.classList.remove('hidden');
        links.forEach(link => link.classList.remove('bg-gray-200'));
        link.classList.add('bg-gray-200');
      });
    });
  });
</script>
